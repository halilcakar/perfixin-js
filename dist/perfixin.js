var perfixin=function(){"use strict";let e;const t=()=>{const[e]=performance.getEntriesByName("first-contentful-paint");return e&&e.startTime||0},n=e=>e-performance.timing.navigationStart,r=(e,t)=>{const n=performance.getEntriesByType("resource");let r=0,i=Number.MAX_VALUE,o=0;return n.forEach((n=>{(n.initiatorType===e||t&&(e=>e&&e.split("?")[0].endsWith("."+t))(n.name))&&(i>n.startTime&&0!==n.startTime&&(i=n.startTime),o<n.responseEnd&&(o=n.responseEnd))})),i===Number.MAX_VALUE||0===o?r=0:r+=o-i,r},i=e=>({ttfb:performance.timing.responseStart-performance.timing.navigationStart,fcp:t(),dcl:performance.timing.domContentLoadedEventEnd-performance.timing.navigationStart,windowLoad:n(e),script:r(null,"js"),image:r("img"),css:r(null,"css"),font:r(null,"woff")+r(null,"woff2"),document:r("xmlhttprequest")}),o=(t,n)=>{console.log(t),console.log(n),clearTimeout(e)};return()=>{if(!url)throw new Error("Perfixin requires a URL to send the metrics..");if(!window)throw new Error("Cannot get metrics without window =)");if(!performance&&!performance.timing)throw new Error("Browser is not compatible with this..");performance&&performance.timing&&performance.timing.loadEventEnd?e=setTimeout((()=>{o(url,i(performance.timing.loadEventEnd))}),3e3):window.onload=()=>{const t=(new Date).getTime();e=setTimeout((()=>{o(url,i(t))}))}}}();
